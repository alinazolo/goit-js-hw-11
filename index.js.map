{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nfunction getImagesByQuery(query) {\n    const URL = \"https://pixabay.com/api\";\n    const API_KEY = \"52901164-552010a54c9c54893e8a3cd4c\";\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n    });\n\n      // Возвращаем Promise — .then и .catch будут в main.js\nreturn axios.get(`${URL}?${params}`)\n}\n\nexport default getImagesByQuery;\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\n// Показать лоадер\nfunction showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\n// Скрыть лоадер\nfunction hideLoader() {\n    loader.classList.add('hidden');\n}\n\n// --- Инициализация SimpleLightbox ---\nlet galleryInstance = null;\nfunction ensureLightbox() {\n  if(!galleryInstance) {\n    galleryInstance = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 250,\n});\n  } else {\n        galleryInstance.refresh();\n  }\n}\n\n// Создать разметку галереи\nfunction createGallery(images) {\n  const markup = images\n      .map(\n        ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n            `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img \n              class=\"gallery-image\" \n              src=\"${webformatURL}\" \n              alt=\"${tags}\" \n            />\n          </a>\n          \n          <ul class=\"image-description\">\n          <li class=\"image-description-item\">Likes <span class=\"description-numbers\">${likes}</span></li>\n          <li class=\"image-description-item\">Views <span class=\"description-numbers\">${views}</span></li>\n          <li class=\"image-description-item\">Comments <span class=\"description-numbers\">${comments}</span></li>\n          <li class=\"image-description-item\">Download <span class=\"description-numbers\">${downloads}</span></li>\n          </ul>\n        </li>`\n      )\n    .join('');\n\n  galleryList.insertAdjacentHTML('beforeend', markup);\n  queueMicrotask(ensureLightbox);\n}\n\nfunction clearGallery() {\n  galleryList.innerHTML = '';\n    if (galleryInstance) {\n    galleryInstance.destroy();\n    galleryInstance = null;\n    }\n}\n\n// Экспорт функций\nexport { hideLoader, showLoader, createGallery, clearGallery };\n","// fetch('https://jsonplaceholder.typicode.com/todos/1').\n// then((response) => {\n//     if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n\n// const { stringify } = require(\"postcss\");\n\n// return response.json()\n// })\n// .then((data) => console.log(data))\n// .catch(console.log);\n// const list = document.querySelector(\".todo-list\");\n// const createLi = ({ title, completed }) => `<li class=\"${completed ? \"done\" : \"in-progress\"}\">${title}</li>`;\n// const createListMarkup = (listArr) => listArr.map(createLi).join(\"\");\n\n// const fetchTodos = () => {\n//     return fetch('https://jsonplaceholder.typicode.com/todos').then(\n//         (response) => {\n//             if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n//     return response.json()\n//         }\n//     );\n// };\n\n// fetchTodos()\n// .then((data) => {\n//     console.log(data);\n//     const markup = createListMarkup(data);\n//     list.innerHTML = markup;\n// })\n// .catch(console.log);\n\n// function searchImagesByQuery(query) {\n//     const URL = \"https://pixabay.com/api\";\n//     const API_KEY = \"52901164-552010a54c9c54893e8a3cd4c\";\n\n//     const params = new URLSearchParams({\n//         key: API_KEY,\n//         q: query,\n//     })\n// fetch(`${URL}?key=${API_KEY}&q=${query}`)\n\n//     return fetch(`${URL}?${params}`).then(\n//         (response) => {\n//             if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n//     return response.json()\n//         }\n//     );\n// }\n\n// searchImagesByQuery(\"green house\")\n// .then((data) => {\n//     console.log(data);\n// })\n// .catch(console.log);\n\n//3\n\n// function fetchPokemonId(pokemonId) {\n//     const URL = \"https://pokeapi.co/api/v2\";\n//     const ENDPOINT = \"pokemon\";\n// return fetch(`${URL}/${ENDPOINT}/${pokemonId}`).then(\n//         (response) => {\n//             if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n//     return response.json()\n//         }\n//     );\n// }\n\n\n\n// const cardContainer = document.querySelector(\".card-container\");\n// const searchForm = document.querySelector(\".search-form\");\n\n// searchForm.addEventListener(\"submit\", handleSearch);\n\n// function handleSearch(event) {\n//     event.preventDefault()\n//     const form = event.currentTarget;\n//     const queryValue = form.elements.query.value.trim().toLowerCase();\n\n//     fetchPokemonId(queryValue) // робимо запит на пошук покемона \n//     .then(renderPokemonCard) // відмальовка карточки покемона\n// .catch(onFetchError) // оброблюємл помилку \n// .finally(() => form.reset());\n// }\n\n// function renderPokemonCard({ name, sprites, weight, height, abilities }) {\n//     const abilityListItems = abilities\n//     .map(({ ability }) => `<li class=\"list-group-item\">${ability.name}</li>`)\n//     .join(\"\");\n\n//     const markup = `<div class=\"card\">\n//     <div class=\"card-img-top\">\n//     <img src=\"${sprites.front_default}\" alt=\"${name}\">\n//     </div>\n//     <div class=\"card-body\">\n//     <h2 class=\"card-title\">Name: ${name}</h2>\n//     <p class=\"card-text\">Weight: ${weight}</p>\n    \n//     <p class=\"card-text\">Skills</p>\n//     <ul class=\"list-group\">${abilityListItems}</ul>\n// </div>\n// </div>`;\n// cardContainer.innerHTML = markup;\n// }\n\n// function onFetchError(error) {\n//     cardContainer.innerHTML = \"\";\n//     alert(\"Oooppss... We haven't found a pockemon!\");\n// }\n\n// const URLBOOK = \"https://68fbd67594ec960660274fff.mockapi.io/books\";\n\n// function fetchBooks() {\n// return fetch(URLBOOK).then(\n//         (response) => {\n//             if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n//     return response.json()\n//         }\n//     );\n// }\n\n// fetchBooks().then(console.log).catch(console.log);\n\n// function fetchBookById(bookId) {\n//     return fetch(`${URLBOOK}/${bookId}`).then((response) => {\n//             if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n//     return response.json()\n//         }\n//     );\n// }\n\n\n// fetchBookById(2).then(console.log).catch(console.log);\n// fetchBookById(4).then(console.log).catch(console.log);\n// fetchBookById(400).then(console.log).catch(console.log);\n\n// const options = {\n//     method: \"POST\",\n//     body: JSON.stringify(book), \n//     header: {\n//         \"Content-Type\": \"application/json\", \n//     }\n// };\n\n// function addBook(book) {\n//  const options = {\n//     method: \"POST\",\n//     body: JSON.stringify(book), \n//     headers: {\n//         \"Content-Type\": \"application/json\", \n//     }\n// };\n//  return fetch(URLBOOK, options).then((response) => {\n//             if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n//     return response.json()\n//         }\n//     );\n// }\n\n   \n\n   \n// addBook({\n//     title: \"Test book\",\n//     author: \"I\",\n//     genres: [\"CSS\", \"HTML\"],\n//     rating: 9,\n// })\n// .then((book) => {\n//     console.log(\"We got an answear from backend\");\n//     console.log(book);\n// })\n// .catch((error) => console.log(error));\n\n// addBook({\n//     title: \"Test book JS\",\n//     author: \"JS\",\n//     genres: [\"JS\", \"React\"],\n//     rating: 9,\n// })\n// .then((book) => {\n//     console.log(\"We got an answear from backend\");\n//     console.log(book);\n// })\n// .catch((error) => console.log(error));\n\n\n// function updateBookById(update, bookId) {\n// const options = {\n//     method: \"PATCH\",\n//     body: JSON.stringify(update), \n//     headers: {\n//         \"Content-Type\": \"application/json\", \n//     }\n// };\n//  return fetch(`${URLBOOK}/${bookId}`, options).then((response) => {\n//             if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n//     return response.json()\n//         }\n//     );\n// }\n\n// updateBookById({ title: \"New Book NODEJS\" }, 5)\n// .then((data) => {\n//     console.log(\"Success update\");\n//     console.log(data);\n// })\n// .catch(console.log);\n\n// updateBookById({ rating: 1 }, 8)\n// .then((data) => {\n//     console.log(\"Success update\");\n//     console.log(data);\n// })\n// .catch(console.log);\n\n// updateBookById({ rating: 4, author: \"Mango\" }, 16)\n// .then((data) => {\n//     console.log(\"Success update\");\n//     console.log(data);\n// })\n// .catch(console.log);\n\n// function removeBook(bookId) {\n//     const options = {\n//         method: \"DELETE\",\n//     };\n\n//     return fetch(`${URLBOOK}/${bookId}`, options).then((response) => {\n//             if (!response.ok) {\n//         throw new Error(response.status);\n//     }\n//     return response.json()\n//         }\n//     );\n// }\n\n// removeBook(14)\n// .then((data) => {\n//     console.log(\"it's success deleted\");\n//     console.log(data);\n// })\n// .catch((err) => {\n//     console.log(\"There is no this data\");\n//     console.log(err);\n// });\n\n// removeBook(10)\n// .then((data) => {\n//     console.log(\"it's success deleted\");\n//     console.log(data);\n// })\n// .catch((err) => {\n//     console.log(\"There is no this data\");\n//     console.log(err);\n// });\n\n// --- Импорт библиотек ---\nimport axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// --- Импорт функций проекта ---\n\nimport getImagesByQuery from \"./js/pixabay-api.js\"\n\nimport { createGallery, clearGallery, hideLoader, showLoader  } from './js/render-functions.js';\n\n\nconst form = document.querySelector(\".form\");\n\n// --- Слушатель формы ---\nform.addEventListener(\"submit\", handleSearch);\nlet isLoading = false;\n\n// --- Функция обработки запроса ---\nfunction handleSearch(event) {\n    event.preventDefault();\n    clearGallery();\n    const form = event.currentTarget;\n    const queryValue = form.elements.search.value.trim().toLowerCase();\n\n      if (!queryValue) {\niziToast.warning({\n      title: \"Warning\",\n      message: \"Write your request\",\n      position: \"topRight\",\n    });\n    form.reset();\n    return;\n  }\n\nisLoading = true;\nshowLoader();\n\ngetImagesByQuery(queryValue)\n.then(response => {\nconst images = response.data.hits;\nif (images.length === 0) {\n    iziToast.error({\n         title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight', // опционально\n      });\n      return; // прерываем выполнение\n}\n\ncreateGallery(images);\n}) \n\n.catch(error => console.log(\"Ошибка запроса:\", error))\n.finally(() => {\n     hideLoader(); // скрываем лоадер\n    form.reset(); // ← и сбрасываем форму\n})\n}"],"names":["getImagesByQuery","query","URL","API_KEY","params","axios","galleryList","loader","showLoader","hideLoader","galleryInstance","ensureLightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","form","handleSearch","event","queryValue","iziToast","response","error"],"mappings":"owBAEA,SAASA,EAAiBC,EAAO,CAC7B,MAAMC,EAAM,0BACNC,EAAU,qCAEVC,EAAS,IAAI,gBAAgB,CAC/B,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAGL,OAAOI,EAAM,IAAI,GAAGH,CAAG,IAAIE,CAAM,EAAE,CACnC,CCbA,MAAME,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EAG/C,SAASC,GAAa,CAClBD,EAAO,UAAU,OAAO,QAAQ,CACpC,CAGA,SAASE,GAAa,CAClBF,EAAO,UAAU,IAAI,QAAQ,CACjC,CAGA,IAAIG,EAAkB,KACtB,SAASC,GAAiB,CACpBD,EAMEA,EAAgB,QAAO,EAL3BA,EAAkB,IAAIE,EAAe,aAAc,CACrD,SAAU,GACV,aAAc,GAChB,CAAC,CAID,CAGA,SAASC,EAAcC,EAAQ,CAC7B,MAAMC,EAASD,EACV,IACC,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACrE;AAAA,0CAC8BL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uFAK8DC,CAAK;AAAA,uFACLC,CAAK;AAAA,0FACFC,CAAQ;AAAA,0FACRC,CAAS;AAAA;AAAA,cAG5F,EACF,KAAK,EAAE,EAEVhB,EAAY,mBAAmB,YAAaS,CAAM,EAClD,eAAeJ,CAAc,CAC/B,CAEA,SAASY,GAAe,CACtBjB,EAAY,UAAY,GAClBI,IACJA,EAAgB,QAAO,EACvBA,EAAkB,KAEtB,CC+NA,MAAMc,EAAO,SAAS,cAAc,OAAO,EAG3CA,EAAK,iBAAiB,SAAUC,CAAY,EAI5C,SAASA,EAAaC,EAAO,CACzBA,EAAM,eAAc,EACpBH,IACA,MAAMC,EAAOE,EAAM,cACbC,EAAaH,EAAK,SAAS,OAAO,MAAM,KAAI,EAAG,cAEnD,GAAI,CAACG,EAAY,CACvBC,EAAS,QAAQ,CACX,MAAO,UACP,QAAS,qBACT,SAAU,UAChB,CAAK,EACDJ,EAAK,MAAK,EACV,MACD,CAGHhB,IAEAR,EAAiB2B,CAAU,EAC1B,KAAKE,GAAY,CAClB,MAAMf,EAASe,EAAS,KAAK,KAC7B,GAAIf,EAAO,SAAW,EAAG,CACrBc,EAAS,MAAM,CACV,MAAO,QACR,QAAS,2EACT,SAAU,UAClB,CAAO,EACD,MACN,CAEAf,EAAcC,CAAM,CACpB,CAAC,EAEA,MAAMgB,GAAS,QAAQ,IAAI,kBAAmBA,CAAK,CAAC,EACpD,QAAQ,IAAM,CACVrB,IACDe,EAAK,MAAK,CACd,CAAC,CACD"}